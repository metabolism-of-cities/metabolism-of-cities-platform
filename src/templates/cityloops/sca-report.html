{% load static %}
{% load moc_extras %}
{% load sass_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link class="favicon" rel="shortcut icon" sizes="126x126" href="{% static 'img/favicon/favicon.png' %}">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
     integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
     crossorigin=""/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" />
  <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.14.0/css/all.css" integrity="sha384-VhBcF/php0Z/P5ZxlxaEx1GwqTQVIBu4G4giRWxTKOCjTxsPFETUDdVL5B6vYvOt" crossorigin="anonymous">

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <link href="{% sass_src 'css/main.scss' %}?refresh21-apr" rel="stylesheet" type="text/css" />
  <style>
    @import url(https://fonts.googleapis.com/css?family=Montserrat:400,700&subset=latin);

    @media all {
      body {
        min-width: unset !important;
        background-color: #fff !important;
      }

      .cover-page {
        page-break-after: always;
        position: relative;
        width: 100vw;
        height: 100vh;
      }

      .cover-title {
        color: #fff;
        padding: 90px;
        font-weight: bolder;
        text-transform: uppercase;
      }

      .report-title {
        background-color: #004d76;
        font-size: 3rem;
        padding: 8px;
        line-height: 6rem;
      }

      .city-title {
        background-color: #00b6ed;
        font-size: 3rem;
        padding: 8px;
        line-height: 6rem;
      }

      .cover-image {
        width: 100vw;
        height: 100vh;
        position: absolute;
        top: 0;
        left: 0;
        object-fit: cover;
        z-index: -1;
      }

      .cityloops-logo {
        width: 15vw;
        position: absolute;
        right: 3vw;
        bottom: 15vw;
      }

      .moc-logo {
        width: 18vw;
        position: absolute;
        right: 10vw;
        bottom: 5vw;
      }

      .cityloops-background {
        background: transparent;
        width: 30vh;
        height: 30vh;
        border: 15vh solid black;
        border-top-color: transparent;
        border-right-color: #fffd;
        border-bottom-color: #fffd;
        border-left-color: transparent;
        position: absolute;
        bottom: 0;
        right: 0;
        z-index: -1;
      }

      .context-map {
        height: 200px;
        width: 100%;
        border-radius: .25rem;
      }

      label {
        font-weight: bold;
        margin-bottom: 0;
      }
    }
  </style>
</head>

<body>
  <div class="cover-page">
    <div class="cover-title">
      <span class="report-title">Sector Circularity Assessment</span>
      <br>
      <span class="report-title">for the {{ sector }} sector</span>
      <br>
      <span class="city-title">{{ space }}</span>
    </div>
    <img class="cover-image" src="{{ space.get_large_photo }}">

    <div class="cityloops-background"></div>
    <img class="cityloops-logo" src="https://metabolismofcities.org/media/records/CityLoops_Logo.png">

    <div class="moc-background"></div>
    <img class="moc-logo" src="https://metabolismofcities.org/media/logos/Metabolism_of_Cities_full_logo_white.png">
  </div>

  <div class="" style="padding: 8rem">
    <section id="introduction">
      <h1>Introduction</h1>
      <p>Maybe short section on what the SCA is. How long cities have been working on them with the two courses.</p>
      <p><a href="https://cityloops.metabolismofcities.org/dashboards/apeldoorn/">URL to City's Data Hub.</a></p>
    </section>

    <section id="urban-context">
      <h1>Urban context</h1>
      <div class="row mb-3">
        <div class="col-3">
          <div class="context-map rounded" id="space-map"></div>
        </div>
        <div class="col-3">
          <div class="context-map rounded" id="nuts3-map"></div>
        </div>
        <div class="col-3">
          <div class="context-map rounded" id="nuts2-map"></div>
        </div>
        <div class="col-3">
          <div class="context-map rounded" id="country-map"></div>
        </div>
      </div>
      <div class="row">
        <div class="col-3">
          <h4>{{ space }}</h4>
          <div><i class="fal fa-users fa-fw mr-2"></i> <span class="question-number bg-dark text-light rounded px-2 mr-2">1A</span></div>
          <div><i class="fal fa-ruler-combined fa-fw mr-2"></i> <span class="question-number bg-dark text-light rounded px-2 mr-2">1B</span> km<sup>2</sup></div>
        </div>
        <div class="col-3">
          <h4>{{ nuts3 }}</h4>
          <div><i class="fal fa-users fa-fw mr-2"></i> <span class="question-number bg-dark text-light rounded px-2 mr-2">2A</span></div>
          <div><i class="fal fa-ruler-combined fa-fw mr-2"></i> <span class="question-number bg-dark text-light rounded px-2 mr-2">2B</span> km<sup>2</sup></div>
        </div>
        <div class="col-3">
          <h4>{{ nuts2 }}</h4>
          <div><i class="fal fa-users fa-fw mr-2"></i> <span class="question-number bg-dark text-light rounded px-2 mr-2">3A</span></div>
          <div><i class="fal fa-ruler-combined fa-fw mr-2"></i> <span class="question-number bg-dark text-light rounded px-2 mr-2">3B</span> km<sup>2</sup></div>
        </div>
        <div class="col-3">
          <h4>{{ country }}</h4>
          <div><i class="fal fa-users fa-fw mr-2"></i> <span class="question-number bg-dark text-light rounded px-2 mr-2">4A</span></div>
          <div><i class="fal fa-ruler-combined fa-fw mr-2"></i> <span class="question-number bg-dark text-light rounded px-2 mr-2">4B</span> km<sup>2</sup></div>
        </div>
      </div>
    </section>

    <section id="land-use">
      <h1>Land use</h1>
      <img class="img-fluid" src="https://i.imgur.com/NmVgDPI.png">
    </section>

    <section id="sector-context">
      <h1>Sector / economic context - biomass / construction</h1>
    </section>

    <section id="indicators">
      <h1>Indicators</h1>
      <table class="table border">
        <thead>
          <tr>
            <th>Indicator</th>
            <th>?</th>
            <th>?</th>
          </tr>
        </thead>
        <tbody>
          {% for each in indicator_scale_list %}
            <tr>
              <td><a href="{% url 'cityloops:indicators' %}#indicator-{{ each.indicator.number }}">{{ each.indicator }}</a></td>
              <td></td>
              <td></td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </section>

    <section id="visualisations">
      <h1>Visualisations</h1>
    </section>

    <section id="matrix">
      <h1>Data gap analysis (matrix)</h1>
    </section>

    <section id="analysis">
      <h1>Data analysis</h1>
      <div class="mb-4">
        <label>Insights on status quo</label>
        <div>
          <span class="question-number bg-dark text-light rounded px-2 mr-1">5</span>
        </div>
      </div>

      <div class="mb-4">
        <label>Upscaling (or reflect on) DAs</label>
        <div>
          <span class="question-number bg-dark text-light rounded px-2 mr-1">6</span>
        </div>
      </div>

      <div class="mb-4">
        <label>Recommendation for making the sector more circular</label>
        <div>
          <span class="question-number bg-dark text-light rounded px-2 mr-1">7</span>
        </div>
      </div>
    </section>

    <section id="references">
      <h1>References</h1>
      <ul>
        <li><a href="{% url 'cityloops:referencespace' country.id  %}">{{ country }}</a></li>
        <li><a href="{% url 'cityloops:referencespace' nuts2.id  %}">{{ nuts2 }}</a></li>
        <li><a href="{% url 'cityloops:referencespace' nuts3.id  %}">{{ nuts3 }}</a></li>
      </ul>
    </section>
  </div>

  <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
  <script>
    {% if space.geometry %}
      // space
      var space_map = L.map("space-map", {
        attributionControl: false,
        zoomControl: false,
      });

      var space_map_geojson = {{ space.geometry.geojson|safe }};
      var space_map_geojsonlayer = L.geoJSON(space_map_geojson).addTo(space_map);

      L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWV0YWJvbGlzbW9mY2l0aWVzIiwiYSI6ImNqcHA5YXh6aTAxcmY0Mm8yMGF3MGZjdGcifQ.lVZaiSy76Om31uXLP3hw-Q", {
        attribution: "Map data &copy; <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors, " +
          "<a href='http://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>, " +
          "Imagery © <a href='http://mapbox.com'>Mapbox</a>",
        id: "mapbox/streets-v11",
        maxZoom: 18,
        id: "mapbox/streets-v11",
        tileSize: 512,
        zoomOffset: -1,
        accessToken: "pk.eyJ1IjoibWV0YWJvbGlzbW9mY2l0aWVzIiwiYSI6ImNqcHA5YXh6aTAxcmY0Mm8yMGF3MGZjdGcifQ.lVZaiSy76Om31uXLP3hw-Q"
      }).addTo(space_map);

      space_map.scrollWheelZoom.disable();
      space_map.fitBounds(space_map_geojsonlayer.getBounds());
    {% endif %}

    // NUTS3
    var nuts_3_map = L.map("nuts3-map", {
      attributionControl: false,
      zoomControl: false,
    });
    var nuts_3_geojson = {{ nuts3.geometry.geojson|safe }};
    var nuts_3_geojsonlayer = L.geoJSON(nuts_3_geojson).addTo(nuts_3_map);

    L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWV0YWJvbGlzbW9mY2l0aWVzIiwiYSI6ImNqcHA5YXh6aTAxcmY0Mm8yMGF3MGZjdGcifQ.lVZaiSy76Om31uXLP3hw-Q", {
      attribution: "Map data &copy; <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors, " +
        "<a href='http://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>, " +
        "Imagery © <a href='http://mapbox.com'>Mapbox</a>",
      id: "mapbox/streets-v11",
      maxZoom: 18,
      id: "mapbox/streets-v11",
      tileSize: 512,
      zoomOffset: -1,
      accessToken: "pk.eyJ1IjoibWV0YWJvbGlzbW9mY2l0aWVzIiwiYSI6ImNqcHA5YXh6aTAxcmY0Mm8yMGF3MGZjdGcifQ.lVZaiSy76Om31uXLP3hw-Q"
    }).addTo(nuts_3_map);

    nuts_3_map.scrollWheelZoom.disable();
    nuts_3_map.fitBounds(nuts_3_geojsonlayer.getBounds());

    // NUTS2
    var nuts_2_map = L.map("nuts2-map", {
      attributionControl: false,
      zoomControl: false,
    });
    var nuts_2_geojson = {{ nuts2.geometry.geojson|safe }};
    var nuts_2_geojsonlayer = L.geoJSON(nuts_2_geojson).addTo(nuts_2_map);

    L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWV0YWJvbGlzbW9mY2l0aWVzIiwiYSI6ImNqcHA5YXh6aTAxcmY0Mm8yMGF3MGZjdGcifQ.lVZaiSy76Om31uXLP3hw-Q", {
      attribution: "Map data &copy; <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors, " +
        "<a href='http://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>, " +
        "Imagery © <a href='http://mapbox.com'>Mapbox</a>",
      id: "mapbox/streets-v11",
      maxZoom: 18,
      id: "mapbox/streets-v11",
      tileSize: 512,
      zoomOffset: -1,
      accessToken: "pk.eyJ1IjoibWV0YWJvbGlzbW9mY2l0aWVzIiwiYSI6ImNqcHA5YXh6aTAxcmY0Mm8yMGF3MGZjdGcifQ.lVZaiSy76Om31uXLP3hw-Q"
    }).addTo(nuts_2_map);

    nuts_2_map.scrollWheelZoom.disable();
    nuts_2_map.fitBounds(nuts_2_geojsonlayer.getBounds());

    // COUNTRY
    var country_map = L.map("country-map", {
      attributionControl: false,
      zoomControl: false,
    });
    var country_geojson = {{ country.geometry.geojson|safe }};
    var country_geojsonlayer = L.geoJSON(country_geojson).addTo(country_map);

    L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token=pk.eyJ1IjoibWV0YWJvbGlzbW9mY2l0aWVzIiwiYSI6ImNqcHA5YXh6aTAxcmY0Mm8yMGF3MGZjdGcifQ.lVZaiSy76Om31uXLP3hw-Q", {
      attribution: "Map data &copy; <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors, " +
        "<a href='http://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>, " +
        "Imagery © <a href='http://mapbox.com'>Mapbox</a>",
      id: "mapbox/streets-v11",
      maxZoom: 18,
      id: "mapbox/streets-v11",
      tileSize: 512,
      zoomOffset: -1,
      accessToken: "pk.eyJ1IjoibWV0YWJvbGlzbW9mY2l0aWVzIiwiYSI6ImNqcHA5YXh6aTAxcmY0Mm8yMGF3MGZjdGcifQ.lVZaiSy76Om31uXLP3hw-Q"
    }).addTo(country_map);

    country_map.scrollWheelZoom.disable();
    country_map.fitBounds(country_geojsonlayer.getBounds());
  </script>
</body>
</html>
